{% extends 'base.html' %}
{% block title %}Customers | Admin{% endblock %}
{% block content %}
<style>
  .admin-hero { background: linear-gradient(135deg, rgba(255,193,7,0.25), rgba(255,111,97,0.25)); border-radius: 18px; padding: 22px 18px; margin-top: 90px; margin-bottom: 16px; color: #fff; box-shadow: 0 6px 20px rgba(0,0,0,0.25); }
  .admin-hero h3 { margin: 0; font-weight: 800; letter-spacing: .3px; }
  .admin-hero .subtitle { opacity: .9; }
  .admin-wrap { padding: 0 12px 40px; font-family: "Poppins", sans-serif; }
  .card-glass { background: rgba(30,30,30,0.55); color:#fff; backdrop-filter: blur(14px); border-radius: 16px; box-shadow: 0 12px 30px rgba(0,0,0,0.35); border: 1px solid rgba(255,255,255,0.08); }
  .card-glass .card-header { border-bottom: 1px solid rgba(255,255,255,0.12); padding: 18px; }
  .table thead th { color: #ffc107; font-weight: 800; border-color: rgba(255,255,255,0.12); text-transform: uppercase; font-size: .85rem; letter-spacing: .4px; }
  .table tbody td { vertical-align: middle; border-color: rgba(255,255,255,0.08); }
  .table tbody tr { transition: background .2s ease, transform .08s ease; }
  .table tbody tr:hover { background: rgba(255,255,255,0.05); }
  .table-striped tbody tr:nth-of-type(odd) { background-color: rgba(255,255,255,0.02); }
  .form-control, .form-select { background: rgba(255,255,255,0.08); border:1px solid rgba(255,255,255,0.25); color:#fff; }
  .form-control::placeholder { color: rgba(255,255,255,0.6); }
  .btn-warning { color:#000; font-weight:700; border: none; box-shadow: 0 6px 16px rgba(255,193,7,0.35); }
  .btn-outline-light { border-color: rgba(255,255,255,0.35) !important; }
  .badge-count { background: #ffc107; color: #000; font-weight: 700; }
  .pagination .page-link { background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.25); color:#fff; }
  .pagination .page-item.active .page-link { background: #ffc107; color:#000; border-color:#ffc107; }
  .search-input { position: relative; }
  .search-input .bi-search { position: absolute; left: 12px; top: 50%; transform: translateY(-50%); opacity: .7; }
  .search-input input { padding-left: 38px; }
</style>
<div class="container">
  <div class="admin-hero d-flex justify-content-between align-items-center">
    <div>
      <h3 class="mb-1"><i class="bi bi-people-fill me-2"></i>Customers</h3>
      <div class="subtitle">Manage your customers and view order activity</div>
    </div>
    <div class="d-none d-md-block">
      <span class="badge badge-count rounded-pill px-3 py-2">Total: {{ total_count }}</span>
    </div>
  </div>
</div>
<div class="admin-wrap container">
  <div class="card card-glass">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h5 class="mb-0">All Customers</h5>
      <form method="get" class="d-flex gap-2" role="search">
        <div class="search-input">
          <i class="bi bi-search"></i>
          <input type="text" class="form-control" name="q" value="{{ query }}" placeholder="Search name or email" />
        </div>
        <button class="btn btn-warning" type="submit"><i class="bi bi-search me-1"></i>Search</button>
      </form>
    </div>
    <div class="card-body p-0">
      <div class="table-responsive">
        <table class="table table-hover table-striped mb-0 align-middle">
          <thead>
            <tr>
              <th style="width: 80px;">ID</th>
              <th>Name</th>
              <th>Email</th>
              <th style="width: 140px;" class="text-end">Actions</th>
            </tr>
          </thead>
          <tbody>
            {% for c in customers %}
            <tr>
              <td>#{{ c.id }}</td>
              <td>{{ c.name }}</td>
              <td>{{ c.email }}</td>
              <td class="text-end">
                <a href="{% url 'admin_customer_detail' c.id %}" class="btn btn-sm btn-warning text-dark fw-semibold">
                  <i class="bi bi-person-lines-fill me-1"></i>View
                </a>
              </td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="4" class="text-center text-muted py-4">No customers found.</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
    <div class="card-footer d-flex justify-content-between align-items-center">
      <small class="text-muted">Page {{ customers.number }} of {{ customers.paginator.num_pages }}</small>
      <nav>
        <ul class="pagination mb-0">
          {% if customers.has_previous %}
          <li class="page-item"><a class="page-link" href="?q={{ query }}&page=1">« First</a></li>
          <li class="page-item"><a class="page-link" href="?q={{ query }}&page={{ customers.previous_page_number }}">‹ Prev</a></li>
          {% else %}
          <li class="page-item disabled"><span class="page-link">« First</span></li>
          <li class="page-item disabled"><span class="page-link">‹ Prev</span></li>
          {% endif %}

          <li class="page-item active"><span class="page-link">{{ customers.number }}</span></li>

          {% if customers.has_next %}
          <li class="page-item"><a class="page-link" href="?q={{ query }}&page={{ customers.next_page_number }}">Next ›</a></li>
          <li class="page-item"><a class="page-link" href="?q={{ query }}&page={{ customers.paginator.num_pages }}">Last »</a></li>
          {% else %}
          <li class="page-item disabled"><span class="page-link">Next ›</span></li>
          <li class="page-item disabled"><span class="page-link">Last »</span></li>
          {% endif %}
        </ul>
      </nav>
    </div>
  </div>
</div>
{% endblock %}
