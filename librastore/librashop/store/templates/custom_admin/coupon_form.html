{% extends 'base.html' %}
{% block title %}{% if is_edit %}Edit Coupon{% else %}Add Coupon{% endif %} | Admin{% endblock %}
{% block content %}
<style>
  .admin-wrap { padding: 90px 12px 40px; font-family: "Poppins", sans-serif; }
  .card-glass { background: rgba(30,30,30,0.55); color:#fff; backdrop-filter: blur(12px); border-radius: 14px; box-shadow: 0 8px 24px rgba(0,0,0,0.35); }
  .card-glass .card-header { border-bottom: 1px solid rgba(255,255,255,0.12); }
  .form-control, .form-select { background: rgba(255,255,255,0.08); border:1px solid rgba(255,255,255,0.25); color:#fff; }
  .form-control::placeholder { color: rgba(255,255,255,0.6); }
  .btn-warning { color:#000; font-weight:600; }
  label { font-weight: 600; }
</style>
<div class="admin-wrap container">
  <div class="mb-3">
    <a href="{% url 'admin_coupons_list' %}" class="btn btn-sm btn-outline-light"><i class="bi bi-arrow-left me-1"></i>Back to Coupons</a>
  </div>
  <div class="card card-glass">
    <div class="card-header">
      <h5 class="mb-0">{% if is_edit %}Edit Coupon{% else %}Add Coupon{% endif %}</h5>
    </div>
    <div class="card-body">
      <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="row g-3">
          <div class="col-md-6">
            <label class="form-label">Code</label>
            <input type="text" name="code" class="form-control" value="{% if coupon %}{{ coupon.code }}{% endif %}" placeholder="E.g. SAVE10" required />
          </div>
          <div class="col-md-6">
            <label class="form-label">Discount Type</label>
            <select name="discount_type" class="form-select" required>
              <option value="Percentage" {% if coupon and coupon.discount_type == 'Percentage' %}selected{% endif %}>Percentage</option>
              <option value="Fixed" {% if coupon and coupon.discount_type == 'Fixed' %}selected{% endif %}>Fixed</option>
            </select>
          </div>
          <div class="col-md-6">
            <label class="form-label">Value</label>
            <input type="number" step="0.01" name="value" class="form-control" value="{% if coupon %}{{ coupon.value }}{% endif %}" placeholder="E.g. 10 or 500" required />
          </div>
          <div class="col-md-6">
            <label class="form-label">Max Users</label>
            <input type="number" name="max_users" class="form-control" value="{% if coupon %}{{ coupon.max_users }}{% else %}0{% endif %}" min="0" />
          </div>
          <div class="col-md-6">
            <label class="form-label">Valid From</label>
            <input type="datetime-local" name="valid_from" class="form-control" value="{% if coupon %}{{ coupon.valid_from|date:'Y-m-d\TH:i' }}{% endif %}" required />
          </div>
          <div class="col-md-6">
            <label class="form-label">Valid To</label>
            <input type="datetime-local" name="valid_to" class="form-control" value="{% if coupon %}{{ coupon.valid_to|date:'Y-m-d\TH:i' }}{% endif %}" required />
          </div>
          <div class="col-12 form-check mt-2">
            <input type="checkbox" class="form-check-input" id="activeChk" name="active" {% if coupon and coupon.active %}checked{% endif %} />
            <label class="form-check-label" for="activeChk">Active</label>
          </div>
        </div>
        <div class="mt-4">
          <button class="btn btn-warning"><i class="bi bi-check2-circle me-1"></i>{% if is_edit %}Update{% else %}Create{% endif %}</button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
