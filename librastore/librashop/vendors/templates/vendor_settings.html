{% extends "base.html" %}
{% load static %}
{% block title %}
Vendor Settings | LIBRA
{% endblock %}

{% block content %}
<div class="vendor-settings-container">
  <div class="settings-header">
    <h2><i class="bi bi-gear-fill"></i>Settings</h2>
    <p class="text-muted">Update your store information and profile settings.</p>
  </div>

  <!-- Messages -->
  {% if messages %}
    {% for message in messages %}
      <div class="alert alert-{{ message.tags }} alert-dismissible fade show custom-alert" role="alert">
        {{ message }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
    {% endfor %}
  {% endif %}

  <div class="settings-content">
    <!-- Current Store Info -->
    <div class="store-info-card">
      <h4><i class="bi bi-shop"></i> Current Store Information</h4>
      <div class="info-grid">
        <div class="info-item">
          <span class="label">Store Name:</span>
          <span class="value">{{ vendor.store_name }}</span>
        </div>
        <div class="info-item">
          <span class="label">Owner Name:</span>
          <span class="value">{{ vendor.owner_name }}</span>
        </div>
        <div class="info-item">
          <span class="label">Phone:</span>
          <span class="value">{{ vendor.phone }}</span>
        </div>
        <div class="info-item">
          <span class="label">Address:</span>
          <span class="value">{{ vendor.address|default:"Not provided" }}</span>
        </div>
      </div>
      {% if vendor.logo %}
        <div class="current-logo">
          <img src="{{ vendor.logo.url }}" alt="{{ vendor.store_name }} logo">
        </div>
      {% endif %}
    </div>

    <!-- Update Settings Form -->
    <div class="settings-form-card">
      <h4><i class="bi bi-pencil-square"></i> Update Settings</h4>
      <form method="post" enctype="multipart/form-data" class="vendor-settings-form">
        {% csrf_token %}
        
        <div class="form-row">
          <div class="form-group">
            <label for="{{ form.store_name.id_for_label }}" class="form-label">
              <i class="bi bi-shop"></i> Store Name
            </label>
            {{ form.store_name }}
            {% if form.store_name.errors %}
              <div class="error-message">{{ form.store_name.errors }}</div>
            {% endif %}
          </div>

          <div class="form-group">
            <label for="{{ form.owner_name.id_for_label }}" class="form-label">
              <i class="bi bi-person-fill"></i> Owner Name
            </label>
            {{ form.owner_name }}
            {% if form.owner_name.errors %}
              <div class="error-message">{{ form.owner_name.errors }}</div>
            {% endif %}
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="{{ form.phone.id_for_label }}" class="form-label">
              <i class="bi bi-telephone-fill"></i> Phone Number
            </label>
            {{ form.phone }}
            {% if form.phone.errors %}
              <div class="error-message">{{ form.phone.errors }}</div>
            {% endif %}
          </div>
        </div>

        <div class="form-group">
          <label for="{{ form.address.id_for_label }}" class="form-label">
            <i class="bi bi-geo-alt-fill"></i> Address
          </label>
          {{ form.address }}
          {% if form.address.errors %}
            <div class="error-message">{{ form.address.errors }}</div>
          {% endif %}
        </div>

        <div class="form-group">
          <label for="{{ form.logo.id_for_label }}" class="form-label">
            <i class="bi bi-image-fill"></i> Store Logo
          </label>
          {{ form.logo }}
          {% if form.logo.errors %}
            <div class="error-message">{{ form.logo.errors }}</div>
          {% endif %}
          <small class="form-text">Upload a new logo to replace the current one.</small>
        </div>

        <div class="form-actions">
          <button type="submit" class="btn btn-save">
            <i class="bi bi-check-circle-fill"></i> Save Changes
          </button>
          <a href="{% url 'vendor_dashboard' %}" class="btn btn-cancel">
            <i class="bi bi-x-circle-fill"></i> Cancel
          </a>
        </div>
      </form>
    </div>

    <!-- Account Information -->
    <div class="account-info-card">
      <h4><i class="bi bi-person-badge"></i> Account Information</h4>
      <div class="info-grid">
        <div class="info-item">
          <span class="label">Username:</span>
          <span class="value">{{ request.user.username }}</span>
        </div>
        <div class="info-item">
          <span class="label">Email:</span>
          <span class="value">{{ request.user.email|default:"Not provided" }}</span>
        </div>
        <div class="info-item">
          <span class="label">Member Since:</span>
          <span class="value">{{ request.user.date_joined|date:"M d, Y" }}</span>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
.vendor-settings-container {
  min-height: 100vh;
  padding: 100px 40px 60px;
  background: radial-gradient(circle at top left, #8b6f00, #5a2a23, #0a0a0a);
  color: #fff;
  font-family: "Poppins", sans-serif;
}

.settings-header {
  text-align: center;
  margin-bottom: 40px;
}

.settings-header h2 {
  color: #ffc107;
  font-weight: 700;
  font-size: 2.5rem;
  margin-bottom: 10px;
}

.settings-header h2 i {
  margin-right: 10px;
  text-shadow: 0 0 20px rgba(255, 193, 7, 0.5);
}

.custom-alert {
  max-width: 800px;
  margin: 0 auto 20px;
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 193, 7, 0.3);
  color: #fff;
  border-radius: 12px;
}

.settings-content {
  max-width: 1000px;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  gap: 30px;
}

.store-info-card,
.settings-form-card,
.account-info-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(12px);
  border-radius: 15px;
  padding: 30px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  border: 1px solid rgba(255, 193, 7, 0.2);
  transition: 0.3s ease;
}

.store-info-card:hover,
.settings-form-card:hover,
.account-info-card:hover {
  border-color: rgba(255, 193, 7, 0.4);
  box-shadow: 0 8px 25px rgba(255, 193, 7, 0.3);
}

.store-info-card h4,
.settings-form-card h4,
.account-info-card h4 {
  color: #ffc107;
  font-weight: 600;
  font-size: 1.5rem;
  margin-bottom: 20px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.store-info-card h4 i,
.settings-form-card h4 i,
.account-info-card h4 i {
  font-size: 1.3rem;
}

.info-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
  margin-bottom: 20px;
}

.info-item {
  display: flex;
  flex-direction: column;
  gap: 5px;
}

.info-item .label {
  color: #ffd54f;
  font-weight: 600;
  font-size: 0.95rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  text-shadow: 0 2px 8px rgba(255, 193, 7, 0.6);
}

.info-item .value {
  color: #fff;
  font-size: 1.1rem;
  font-weight: 400;
}

.current-logo {
  margin-top: 20px;
  text-align: center;
}

.current-logo img {
  max-width: 200px;
  max-height: 200px;
  border-radius: 10px;
  border: 2px solid rgba(255, 193, 7, 0.3);
  padding: 10px;
  background: rgba(255, 255, 255, 0.05);
}

.vendor-settings-form {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.form-row {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
}

.form-group {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.form-label {
  color: #ffd54f;
  font-weight: 600;
  font-size: 1.05rem;
  display: flex;
  align-items: center;
  gap: 8px;
  text-shadow: 0 2px 8px rgba(255, 193, 7, 0.6);
  letter-spacing: 0.3px;
}

.form-label i {
  font-size: 0.9rem;
}

.form-control {
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 193, 7, 0.3);
  color: #fff;
  padding: 12px;
  border-radius: 8px;
  font-size: 1rem;
  transition: 0.3s ease;
}

.form-control:focus {
  background: rgba(255, 255, 255, 0.15);
  border-color: #ffc107;
  outline: none;
  box-shadow: 0 0 10px rgba(255, 193, 7, 0.3);
  color: #fff;
}

.form-control::placeholder {
  color: rgba(255, 255, 255, 0.5);
}

.form-text {
  color: rgba(255, 255, 255, 0.7);
  font-size: 0.85rem;
  margin-top: 5px;
}

.error-message {
  color: #ff6f61;
  font-size: 0.85rem;
  margin-top: 5px;
}

.form-actions {
  display: flex;
  gap: 15px;
  justify-content: center;
  margin-top: 20px;
}

.btn {
  padding: 12px 30px;
  border-radius: 12px;
  font-weight: 600;
  font-size: 1rem;
  border: none;
  cursor: pointer;
  transition: 0.3s ease;
  display: flex;
  align-items: center;
  gap: 8px;
  text-decoration: none;
}

.btn-save {
  background: linear-gradient(90deg, #ffc107, #ff6f61);
  color: #000;
}

.btn-save:hover {
  transform: scale(1.05);
  box-shadow: 0 0 20px rgba(255, 193, 7, 0.6);
}

.btn-cancel {
  background: rgba(255, 255, 255, 0.1);
  color: #fff;
  border: 1px solid rgba(255, 193, 7, 0.3);
}

.btn-cancel:hover {
  background: rgba(255, 255, 255, 0.15);
  border-color: rgba(255, 193, 7, 0.5);
  transform: scale(1.05);
}

@media (max-width: 768px) {
  .vendor-settings-container {
    padding: 80px 20px 40px;
  }

  .settings-header h2 {
    font-size: 2rem;
  }

  .form-row {
    grid-template-columns: 1fr;
  }

  .form-actions {
    flex-direction: column;
  }

  .btn {
    justify-content: center;
  }
}
</style>
{% endblock %}
