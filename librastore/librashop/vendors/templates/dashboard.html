{% extends "base.html" %}
{% load humanize %}
{% block title %}
Vender Dashboard | LIBRA
{% endblock %}




{% block content %}
<div class="vendor-dashboard-container">
  <div class="dashboard-header">
    <h2>Welcome, {{ vendor.name }}</h2>
    <p class="text-muted">Here’s your store performance overview.</p>
  </div>

  <!-- Stats Cards -->
  <div class="stats-grid">
    <div class="stat-card">
      <i class="bi bi-box-seam"></i>
      <h4>{{ total_products }}</h4>
      <p>Products</p>
    </div>
    <div class="stat-card">
      <i class="bi bi-bag-check"></i>
      <h4>{{ total_orders }}</h4>
      <p>Orders</p>
    </div>
    <div class="stat-card">
      <i class="bi bi-cash-stack"></i>
      <h4>₹{{ total_earnings }}</h4>
      <p>Earnings</p>
    </div>
    <div class="stat-card">
      <i class="bi bi-star"></i>
      <h4>{{ avg_rating }}</h4>
      <p>Rating</p>
    </div>
  </div>

  <!-- Actions -->
  <div class="dashboard-actions">
    <a href="{% url 'product_create' %}" class="btn btn-glass">Add Product</a>
    <a href="{% url 'vendor_orders' %}" class="btn btn-warning text-dark fw-semibold rounded-pill px-4">View Orders</a>
  </div>

  <!-- Recent Orders -->
  <div class="recent-orders">
    <h4>Recent Orders</h4>
    <table class="table table-dark table-striped table-borderless align-middle">
      <thead>
        <tr>
          <th>Order ID</th>
          <th>Customer</th>
          <th>Total</th>
          <th>Status</th>
          <th>Date</th>
        </tr>
      </thead>
      <tbody>
        {% for order in recent_orders %}
        <tr>
          <td>#{{ order.id }}</td>
          <td>{% if order.custamer %}{% if order.custamer.user %}{{ order.custamer.user.username }}{% elif order.custamer.name %}{{ order.custamer.name }}{% else %}N/A{% endif %}{% else %}N/A{% endif %}</td>
          <td>₹{% with total=0 %}{% for item in order.orderitem_set.all %}{% if item.product %}{% widthratio item.quantity 1 item.product.price as subtotal %}{% if forloop.first %}{{ subtotal|floatformat:2 }}{% endif %}{% endif %}{% empty %}0.00{% endfor %}{% endwith %}</td>
          <td>
            <span class="badge {% if order.status == 'paid' %}bg-success{% elif order.status == 'pending' %}bg-warning{% else %}bg-danger{% endif %}">
              {{ order.status|capfirst }}
            </span>
          </td>
          <td>{{ order.date_odered|date:"M d, Y" }}</td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="5" class="text-center text-muted">No recent orders found.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>












<style>
.vendor-dashboard-container {
  min-height: 100vh;
  padding: 100px 40px 60px;
  background: radial-gradient(circle at top left, #ffc107, #ff6f61, #1a1a1a);
  color: #fff;
  font-family: "Poppins", sans-serif;
}

.dashboard-header {
  text-align: center;
  margin-bottom: 40px;
}

.dashboard-header h2 {
  color: #ffc107;
  font-weight: 700;
}

.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 20px;
  margin-bottom: 40px;
}

.stat-card {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(12px);
  border-radius: 15px;
  text-align: center;
  padding: 25px;
  transition: 0.3s ease;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  border: 1px solid rgba(255, 193, 7, 0.2);
}

.stat-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 8px 25px rgba(255, 193, 7, 0.4);
  border-color: rgba(255, 193, 7, 0.5);
  background: rgba(255, 255, 255, 0.12);
}

.stat-card i {
  font-size: 3rem;
  color: #ffc107;
  margin-bottom: 15px;
  text-shadow: 0 0 20px rgba(255, 193, 7, 0.5);
}

.stat-card h4 {
  font-size: 1.8rem;
  font-weight: 700;
  color: #fff;
  margin: 10px 0;
  text-shadow: 0 2px 10px rgba(255, 193, 7, 0.3);
}

.stat-card p {
  color: #ffc107;
  font-weight: 500;
  font-size: 1rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.dashboard-actions {
  text-align: center;
  margin-bottom: 50px;
}

.btn-glass {
  background: linear-gradient(90deg, #ffc107, #ff6f61);
  color: #000;
  border: none;
  padding: 10px 25px;
  border-radius: 12px;
  font-weight: 600;
  margin: 0 10px;
  transition: 0.3s ease;
}

.btn-glass:hover {
  transform: scale(1.05);
  box-shadow: 0 0 15px rgba(255, 193, 7, 0.6);
}

.recent-orders {
  background: rgba(30, 30, 30, 0.6);
  backdrop-filter: blur(20px);
  border-radius: 15px;
  padding: 25px;
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4);
}

.recent-orders h4 {
  color: #ffc107;
  margin-bottom: 20px;
  font-weight: 600;
}
</style>

{% endblock %}